import{u as N,r as v,j as l,a as e,L as r,ay as B,m as f,F as k,y as F,C as U,p as I,bn as S,x as Z,au as y,q as K,P as M,S as _,I as j,d as Y,ai as J,bo as z,bp as G,aO as Q,bq as X,Q as ee,b as q,bb as te,H as ie,A as ne,br as le,bs as re,bt as ae,bu as ce}from"./index-a5f9a2c2.js";function se(){const i=N(M.Settings),[s,o]=v.useState(!1),c=N(S.Alarms),d=n=>{let t=n.hour,h=n.minute;K("info",`Formatting time: ${t}:${h}`),i.time.twelveHourClock&&(t>12?t=t-12:t===0&&(t=12));let m,A;return t<10?m=`0${t}`:m=`${t}`,h<10?A=`0${h}`:A=`${h}`,i.time.twelveHourClock?`${m}:${A} ${n.hour>12?"PM":"AM"}`:`${m}:${A}`};return l("div",{className:"alarm-container",children:[l("div",{className:"alarm-header",children:[l("div",{className:"alarm-header-top",children:[e("div",{className:"edit",onClick:()=>o(!s),children:s?r("APPS.CLOCK.ALARM.DONE"):r("APPS.CLOCK.ALARM.EDIT")}),e(B,{onClick:()=>b.set("NewAlarm")})]}),e("div",{className:"alarm-title",children:r("APPS.CLOCK.ALARM.TITLE")})]}),e("div",{className:"alarm-content",children:c.sort((n,t)=>n.hours===t.hours?n.minutes-t.minutes:n.hours-t.hours).map((n,t)=>e(f.div,{initial:{opacity:0,scale:.9},whileInView:{opacity:1,scale:1},viewport:{once:!0},className:"alarm","data-active":n.enabled,children:s?l(k,{children:[l("div",{className:"alarm-wrapper",children:[e(F,{onClick:()=>{U.PopUp.set({title:r("APPS.CLOCK.ALARM.DELETE_TITLE"),description:r("APPS.CLOCK.ALARM.DELETE_TEXT"),buttons:[{title:r("APPS.CLOCK.ALARM.BUTTON_CANCEL")},{title:r("APPS.CLOCK.ALARM.BUTTON_DELETE"),color:"red",cb:()=>{I("Clock",{action:"deleteAlarm",id:n.id},!0).then(()=>{S.Alarms.set(c.filter(h=>h.id!==n.id))})}}]})}}),l("div",{className:"alarm-info",children:[e("div",{className:"time",children:d({hour:n.hours,minute:n.minutes})}),e("div",{className:"label",children:n.label??r("APPS.CLOCK.ALARM.TITLE")})]})]}),e(Z,{})]}):l(k,{children:[l("div",{className:"alarm-info",children:[e("div",{className:"time",children:d({hour:n.hours,minute:n.minutes})}),e("div",{className:"label",children:n.label??r("APPS.CLOCK.ALARM.TITLE")})]}),e(y,{checked:n.enabled,onChange:()=>{I("Clock",{action:"toggleAlarm",id:n.id,enabled:!n.enabled},!0).then(h=>{if(h===void 0)return K("error","Failed to toggle alarm");S.Alarms.set(c.map((m,A)=>(A===t&&(m.enabled=!m.enabled),m)))})}})]})},t))})]})}function oe(){const[i,s]=v.useState(""),[o,c]=v.useState({hour:0,minute:0}),d=()=>{let t={label:i&&i.length>0?i:null,minutes:o.minute,hours:o.hour};I("Clock",{action:"createAlarm",...t},Math.floor(Math.random()*1e3)+1).then(h=>{if(!h)return K("error","Failed to create alarm");S.Alarms.set([...S.Alarms.value,{...t,id:h,enabled:!0}]),b.set("Alarm")})},n=(t,h)=>{const A=document.querySelector(`#${h}`).querySelector(".active");let g=t.deltaY>0?A.nextElementSibling:A.previousElementSibling;g==null||g.click()};return l(f.div,{..._("left","new-alarm",.2),className:"new-alarm-container",children:[l("div",{className:"new-alarm-header",children:[l("div",{className:"cancel",onClick:()=>b.set("Alarm"),children:[e(j,{}),r("APPS.CLOCK.ALARM.ALARMS")]}),l("div",{className:"title",children:[" ",r("APPS.CLOCK.ALARM.NEW_ALARM")]}),e("div",{className:"save",onClick:()=>d(),children:r("APPS.CLOCK.ALARM.SAVE")})]}),l("div",{className:"new-alarm-content",children:[l("div",{className:"picker alarm",children:[e("div",{children:l("ul",{id:"hour",onWheel:t=>{n(t,"hour")},children:[e("li",{}),[...Array(24).keys()].map((t,h)=>l("li",{onClick:m=>{m.target.classList.contains("active")||(m.target.scrollIntoView({block:"center",behavior:"smooth"}),c({...o,hour:t}))},className:o.hour===t?"active":"",children:[t<10?`0${t}`:t," "]},h)),e("li",{})]})}),e("div",{className:"separator",children:":"}),e("div",{children:l("ul",{id:"minute",onWheel:t=>{n(t,"minute")},children:[e("li",{}),[...Array(60).keys()].map((t,h)=>e("li",{className:o.minute===t?"active":"",onClick:m=>{m.target.classList.contains("active")||(m.target.scrollIntoView({block:"center",behavior:"smooth"}),c({...o,minute:t}))},children:t<10?`0${t}`:t},h)),e("li",{})]})}),e("div",{className:"selected"})]}),l("div",{className:"settings",children:[l("div",{className:"item",children:[e("div",{className:"label",children:r("APPS.CLOCK.ALARM.LABEL")}),e(Y,{type:"text",placeholder:r("APPS.CLOCK.ALARM.TITLE"),onChange:t=>s(t.target.value)})]}),l("div",{className:"item",children:[e("div",{className:"label",children:r("APPS.CLOCK.ALARM.SOUND")}),e(y,{disabled:!0,checked:!0})]}),l("div",{className:"item",children:[e("div",{className:"label",children:r("APPS.CLOCK.ALARM.SNOOZE")}),e(y,{disabled:!0,checked:!1})]})]})]})]})}function E(i){let s=i.disabled,o=i.active;return e("div",{className:J("button",o&&"active",s&&"disabled"),children:e("div",{className:"button-inner",style:{fontSize:i.content.length>7?"12px":"15px"},onClick:()=>i.onClick(),children:i.content})})}function de(){const i=N(S.Stopwatch);return l("div",{className:"stopwatch-container",children:[e("div",{className:"stopwatch-header",children:e("div",{className:"stopwatch-title",children:r("APPS.CLOCK.STOPWATCH.TITLE")})}),l("div",{className:"stopwatch-content",children:[e("div",{className:"clock",children:O(i.time,!0)}),l("div",{className:"actions",children:[e(E,{content:i.running||!i.running&&i.time==0?r("APPS.CLOCK.STOPWATCH.LAP"):r("APPS.CLOCK.STOPWATCH.RESET"),disabled:!i.running&&i.time===0,onClick:()=>{!i.running&&i.time!==0?S.Stopwatch.set({running:!1,time:0,laps:[]}):i.time>0&&S.Stopwatch.set({...i,laps:[...i.laps,i.time]})}}),e(E,{active:i.running,content:i.running?r("APPS.CLOCK.STOPWATCH.STOP"):r("APPS.CLOCK.STOPWATCH.START"),onClick:()=>S.Stopwatch.set({...i,running:!i.running})})]}),e("div",{className:"laps","data-empty":i.laps.length===0,children:l("table",{style:{borderSpacing:`${i.laps.length===0?"3.5rem":"2.6rem"} 1rem`},children:[e("thead",{children:l("tr",{children:[e("th",{children:r("APPS.CLOCK.STOPWATCH.LAP")}),e("th",{children:r("APPS.CLOCK.STOPWATCH.TIME")}),e("th",{children:r("APPS.CLOCK.STOPWATCH.TOTAL")})]})}),l("tbody",{children:[i.laps.length===0&&e("tr",{children:e("td",{className:"no-laps",colSpan:3,children:r("APPS.CLOCK.STOPWATCH.NO_LAPS")})}),(()=>{if(i.laps.length===0)return null;const s=i.laps.map((d,n)=>n===0?d:d-i.laps[n-1]),o=s.indexOf(Math.min(...s)),c=s.indexOf(Math.max(...s));return i.laps.map((d,n)=>{const t=n===o,h=n===c;return l(f.tr,{initial:{opacity:0,scale:.9},whileInView:{opacity:1,scale:1},viewport:{once:!0},"data-best":t,"data-worst":h,children:[e("td",{children:n+1}),e("td",{children:O(n===0?d:d-i.laps[n-1],!0)}),e("td",{children:O(d,!0)})]},d)})})()]})]})})]})]})}function he(){const i=N(q),s=N(M.Settings),o=N(te.Visible),c=N(S.Timer),[d,n]=v.useState([]),[t,h]=v.useState({hours:0,minutes:0,seconds:0}),m=v.useRef(null),A=v.useRef(null),g=v.useRef(null),[L,$]=v.useState(null);v.useEffect(()=>{let a=new Date(Date.now()+c.time*1e3);$(a.toLocaleTimeString(i==null?void 0:i.DateLocale,{hour:"numeric",minute:"numeric",hour12:s.time.twelveHourClock}));let u=localStorage.getItem("recent-timers");n(u?JSON.parse(u):[])},[]);const D=a=>{if(a||(a=t.hours*3600+t.minutes*60+t.seconds),a>0){S.Timer.set({running:!0,time:a});let u=new Date(Date.now()+a*1e3);$(u.toLocaleTimeString(i==null?void 0:i.DateLocale,{hour:"numeric",minute:"numeric",hourCycle:"h23"}));let C=[a,...d.filter(P=>P!==a)];C.length>5&&C.shift(),localStorage.setItem("recent-timers",JSON.stringify(C)),n(C)}},R=(a,u)=>{const P=document.querySelector(`#${u}`).querySelector(".active");let p=a.deltaY>0?P.nextElementSibling:P.previousElementSibling;p==null||p.click()},W=v.useRef(!0);return v.useEffect(()=>{var a,u,C;if(W.current){W.current=!1;return}if(!c.running&&(S.Timer.set({running:!1,time:0}),o)){let P=(a=m.current)==null?void 0:a.querySelector(".active"),p=(u=A.current)==null?void 0:u.querySelector(".active"),w=(C=g.current)==null?void 0:C.querySelector(".active");P&&(P==null||P.scrollIntoView({block:"center"})),p&&(p==null||p.scrollIntoView({block:"center"})),w&&(w==null||w.scrollIntoView({block:"center"}))}},[c.running]),l("div",{className:"timer-container",children:[e("div",{className:"timer-header",children:e("div",{className:"timer-title",children:r("APPS.CLOCK.TIMER.TITLE")})}),l("div",{className:"timer-content",children:[c.running?e(k,{children:l("div",{className:"timer-wrapper",children:[e("div",{className:"border-wrapper",children:e(z,{value:c.time/(t.hours*3600+t.minutes*60+t.seconds)*100,strokeWidth:4,styles:G({strokeLinecap:"butt",pathColor:"#348DE9",trailColor:s.display.theme==="light"?"#AAAAAA":"#303030",pathTransitionDuration:.5})})}),l("div",{className:"timer",children:[e("div",{className:"timer-text",children:O(c.time,!1)}),L&&l("div",{className:"when-done",children:[e(Q,{}),L]})]})]})}):l(k,{children:[l("div",{className:"picker-labels",children:[e("div",{children:r("APPS.CLOCK.TIMER.HOURS")}),e("div",{children:r("APPS.CLOCK.TIMER.MINUTES")}),e("div",{children:r("APPS.CLOCK.TIMER.SECONDS")})]}),l("div",{className:"picker",children:[e("div",{ref:m,children:l("ul",{id:"hours",onWheel:a=>{R(a,"hours")},children:[e("li",{}),[...Array(24).keys()].map((a,u)=>e("li",{onClick:C=>{C.target.scrollIntoView({block:"center",behavior:"smooth"}),h({...t,hours:a})},className:t.hours===a?"active":"",children:a},u)),e("li",{})]})}),e("div",{ref:A,children:l("ul",{id:"minutes",onWheel:a=>{R(a,"minutes")},children:[e("li",{}),[...Array(60).keys()].map((a,u)=>e("li",{onClick:C=>{C.target.scrollIntoView({block:"center",behavior:"smooth"}),h({...t,minutes:a})},className:t.minutes===a?"active":"",children:a},u)),e("li",{})]})}),e("div",{ref:g,children:l("ul",{id:"seconds",onWheel:a=>{R(a,"seconds")},children:[e("li",{}),[...Array(60).keys()].map((a,u)=>e("li",{onClick:C=>{C.target.scrollIntoView({block:"center",behavior:"smooth"}),h({...t,seconds:a})},className:t.seconds===a?"active":"",children:a},u)),e("li",{})]})}),e("div",{className:"selected"})]})]}),l("div",{className:"actions",children:[e(E,{content:r("APPS.CLOCK.TIMER.CANCEL"),disabled:!c.running,onClick:()=>{c.running&&S.Timer.set({running:!1,time:0})}}),e(E,{content:c.running?r("APPS.CLOCK.TIMER.STOP"):r("APPS.CLOCK.TIMER.START"),active:c.running,onClick:()=>c.running?S.Timer.set({...c,running:!1}):D()})]}),!c.running&&l("div",{className:"recents",children:[e("div",{className:"title",children:"Recents"}),l("div",{className:"recents-wrapper","data-empty":d.length===0,children:[d.length===0&&e("div",{className:"no-recents",children:r("APPS.CLOCK.TIMER.NO_RECENTS")}),d.map((a,u)=>l(f.div,{initial:{opacity:0,scale:.9},whileInView:{opacity:1,scale:1},viewport:{once:!0},className:"item",children:[e("div",{className:"time",children:O(a)}),l("div",{className:"buttons",children:[e(X,{className:"red",onClick:()=>{let C=d.filter((P,p)=>p!==u);localStorage.setItem("recent-timers",JSON.stringify(C)),n(C)}}),e(ee,{className:"green",onClick:()=>D(a)})]})]},u))]})]})]})]})}function me(){const i=N(q),s=N(M.Settings),o=i.world_clock_locations,c=n=>new Date().toLocaleTimeString(i.DateLocale,{timeZone:o[n],hour:"2-digit",minute:"2-digit",hour12:s.time.twelveHourClock}),d=n=>{const t=new Date;let h=t.toLocaleTimeString([],{hour:"2-digit",hour12:!1}),m=t.toLocaleDateString([],{day:"numeric"}),A=t.toLocaleTimeString([],{hour:"2-digit",hour12:!1,timeZone:o[n]}),g=t.toLocaleDateString([],{day:"numeric",timeZone:o[n]}),L=parseInt(A)-parseInt(h);return L===0?"Local time":g>m?`${r("APPS.CLOCK.WORLDCLOCK.TOMORROW")} ${L>0?"+":""}${L}HRS`:g<m?`${r("APPS.CLOCK.WORLDCLOCK.YESTERDAY")} ${L>0?"-":""}${L}HRS`:`${r("APPS.CLOCK.WORLDCLOCK.TODAY")} ${L>0?"+":""}${L}HRS`};return l("div",{className:"worldclock-container",children:[e("div",{className:"worldclock-header",children:e("div",{className:"worldclock-title",children:r("APPS.CLOCK.WORLDCLOCK.TITLE")})}),e("div",{className:"worldclock-content",children:Object.keys(o).map((n,t)=>l(f.div,{initial:{opacity:0,scale:.9},whileInView:{opacity:1,scale:1},viewport:{once:!0},className:"worldclock",children:[l("div",{className:"worldclock-location",children:[e("div",{className:"location",children:n}),e("div",{className:"difference",children:d(n)})]}),e("div",{className:"time",children:c(n)})]},t))})]})}var H,V,x;const b=ie(((x=(V=(H=ne.value)==null?void 0:H.active)==null?void 0:V.data)==null?void 0:x.view)??"Timer"),T={"World Clock":{icon:e(le,{}),title:r("APPS.CLOCK.WORLDCLOCK.TITLE"),view:e(me,{})},Alarm:{icon:e(re,{}),title:r("APPS.CLOCK.ALARM.TITLE"),view:e(se,{})},Stopwatch:{icon:e(ae,{}),title:r("APPS.CLOCK.STOPWATCH.TITLE"),view:e(de,{})},Timer:{icon:e(ce,{}),title:r("APPS.CLOCK.TIMER.TITLE"),view:e(he,{})},NewAlarm:{view:e(oe,{}),title:r("APPS.CLOCK.ALARM.NEW_ALARM"),hidden:!0}};function Ce(){const i=N(b);return l("div",{className:"clock-container",children:[e(f.div,{..._(i==="NewAlarm"?"right":"left",i,.2),className:"clock-body",children:T[i].view}),e("div",{className:"clock-footer",children:Object.keys(T).filter(s=>!T[s].hidden).map((s,o)=>{var d,n,t;let c=i==s||i=="NewAlarm"&&s=="Alarm";return l("div",{className:`${c?"active":""}`,style:{fontSize:((d=T[s])==null?void 0:d.title.length)>10?"13px":"14px"},onClick:()=>b.set(s),children:[(n=T[s])==null?void 0:n.icon,(t=T[s])==null?void 0:t.title]},o)})})]})}const O=(i,s)=>{if(s){let o=i%100,c=Math.floor(i/100)%60,d=Math.floor(i/6e3)%60,n=Math.floor(i/36e4)%24;return n>0?`${n.toString().padStart(2,"0")}:${d.toString().padStart(2,"0")}:${c.toString().padStart(2,"0")}.${o.toString().padStart(2,"0")}`:`${d.toString().padStart(2,"0")}:${c.toString().padStart(2,"0")}.${o.toString().padStart(2,"0")}`}else{let o=i%60,c=Math.floor(i/60)%60;return`${(Math.floor(i/3600)%24).toString().padStart(2,"0")}:${c.toString().padStart(2,"0")}:${o.toString().padStart(2,"0")}`}},Ae=i=>{if(!i)return;const s=i.parentElement.parentElement;if(!s)return console.error("Failed to snap element");const o=s.getBoundingClientRect(),c=i.getBoundingClientRect(),d=c.top-o.top,t=s.scrollTop+d-o.height/2+c.height/2;s.scrollTo({top:t,behavior:"smooth"})};export{b as View,Ce as default,O as formatTime,Ae as snapElement};
